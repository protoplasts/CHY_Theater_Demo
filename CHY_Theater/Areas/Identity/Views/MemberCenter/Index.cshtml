@model CHY_Theater.Areas.Identity.Models.ViewModels.MemberCentreViewModel
@{
    ViewData["Title"] = "會員中心";
    Layout = "_MemberCenterLayout";
}

@section Styles {
    <style>    
        
        .center-container {
            padding-top: 120px; /* Adjusted for navbar height */
            background-image: url('/img/test3.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: repeat;
            position: relative;
        }

            .center-container::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background-color: rgba(0, 0, 0, 0.5); /* Adjust the last value (0.5) for opacity */
            z-index: 0;
        }

            .center-container > * {
            position: relative;
            z-index: 1;
        }
        .list-group-item.active {
            background-color: #dc3545;
            border-color: #dc3545;
        }

        .list-group-item:hover {
            background-color: #f8d7da;
            color: #721c24;
        }

        .card {
            border: none;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }

        .card-title {
            color: #dc3545;
        }

        dt {
            font-weight: 600;
            color: #495057;
        }

        dd {
            color: #6c757d;
        }

        .row-body{
            background-color: currentcolor;
        }

        .barcode-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .barcode-image {
            max-width: 100%;
            height: auto;
            margin-bottom: 5px;
        }

        .barcode-id {
            font-size: 0.9em;
            color: #6c757d;
            font-style: italic;
        }
    </style>
}


        <!-- Right Content Area -->
<!-- Right Content Area -->
<div class="col-md-9">
    <h2 class="mb-4 text-dark mt-5">會員中心</h2>
    <div class="card mb-4">
        <div class="card-body">
            <div class="row">
                <!-- 個人資訊 (4/12) -->
                <div class="col-md-4">
                    <h4 class="card-title mb-4">個人資訊</h4>
                    <hr />
                    <dl>
                        <dt><i class="fas fa-user me-2"></i>用戶名稱:</dt>
                        <dd>@Model.UserName</dd>
                        <dt><i class="fas fa-envelope me-2"></i>電子郵件:</dt>
                        <dd>@Model.Email</dd>
                        <dt><i class="fas fa-check-circle me-2"></i>電子郵件已驗證:</dt>
                        <dd>@(Model.EmailConfirmed ? "是" : "否")</dd>
                        <dt><i class="me-2"></i>會員狀態</dt>
                        <dd>
                            @if (Model.MembershipLevel == "basic")
                            {
                                <span>您尚未填寫詳細個人資訊 完成填寫以便累積會員點數</span>
                            }
                            else
                            {
                                @Model.MembershipLevel
                            }
                        </dd>
                    </dl>
                </div>

                <!-- 會員資訊 (8/12) -->
                <div class="col-md-8">
                    <h4 class="card-title mb-4">會員資訊</h4>
                    <hr />
                    <dl class="row">
                        <dt class="col-sm-4"><i class="fas fa-star me-2"></i>會員等級:</dt>
                        <dd class="col-sm-8">@Model.MembershipLevel</dd>
                        <dt class="col-sm-4"><i class="fas fa-coins me-2"></i>會員點數:</dt>
                        <dd class="col-sm-8">@Model.MemberPoints</dd>
                        <dt class="col-sm-4"><i class="fas fa-barcode me-2"></i>會員條碼:</dt>
                        <dd class="col-sm-8">
                            <div class="barcode-container">
                                <img src="@Url.Action("GetUserBarcode", "MemberCenter", new { id = Model.Id })" alt="會員條碼" class="barcode-image" />
                                <span class="barcode-id">@Model.Id</span>
                            </div>
                        </dd>
                        <dt class="col-sm-4"><i class="fas fa-calendar-alt me-2"></i>註冊日期:</dt>
                        <dd class="col-sm-8">@Model.DateCreated.ToString("yyyy/MM/dd")</dd>
                        <dt class="col-sm-4"><i class="fas fa-shopping-cart me-2"></i>最近購票:</dt>
                        <dd class="col-sm-8">@(Model.LastTicketPurchase?.ToString("yyyy/MM/dd") ?? "無記錄")</dd>
                        <dt class="col-sm-4"><i class="fas fa-dollar-sign me-2"></i>近一年累計消費金額:</dt>
                        <dd class="col-sm-8">$@Model.TotalSpent.ToString("N0")</dd>
                        <dt class="col-sm-4"><i class="fas fa-clock me-2"></i>最近登入時間:</dt>
                        <dd class="col-sm-8">@(Model.LastLoginTime?.ToString("yyyy/MM/dd HH:mm") ?? "無記錄")</dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-body">
            <h4 class="card-title mb-4">最近活動</h4>
            <hr />
            <ul class="list-group">
                <li class="list-group-item">最近購票: @(Model.LastTicketPurchase?.ToString("yyyy/MM/dd") ?? "無記錄")</li>
                <li class="list-group-item">累計消費金額: $@Model.TotalSpent.ToString("N0")</li>
                <li class="list-group-item">最近登入時間: @(Model.LastLoginTime?.ToString("yyyy/MM/dd HH:mm") ?? "無記錄")</li>
            </ul>
        </div>
    </div>
</div>